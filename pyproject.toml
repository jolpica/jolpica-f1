[tool.poetry]
name = "formulastat"
version = "0.1.0"
description = ""
authors = ["Your Name <you@example.com>"]

[tool.poetry.dependencies]
python = ">=3.9,<3.13"
Django = "^4.2.5"
djangorestframework = "^3.14.0"
django-environ = "^0.11.2"
psycopg = "^3.1.12"
requests = "^2.31.0"

[tool.poetry.group.import.dependencies]
pandas = "^2.1.1"
tqdm = "^4.66.1"


[tool.poetry.group.dev.dependencies]
mypy = {extras = ["dmypy"], version = "^1.5.1"}
django-stubs = {extras = ["compatible-mypy"], version = "^4.2.4"}
djangorestframework-stubs = {extras = ["compatible-mypy"], version = "^3.14.3"}
ruff = "^0.0.292"
black = "^23.9.1"


[tool.poetry.group.local.dependencies]
ipykernel = "^6.25.2"

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"


[tool.mypy]
plugins = ["mypy_django_plugin.main", "mypy_drf_plugin.main"]
exclude = ["^tests", "^formulastat/ergast"]

[tool.django-stubs]
django_settings_module = "formulastat.settings"


[tool.black]
line-length = 120


[tool.ruff]
line-length = 120
src = ["src"]
target-version = "py310"

ignore = ["TRY300", "TRY003"]
select = [
    "RUF", # Ruff specific
    "I",   # isort - Import sorting
    "S",   # Bandit - Security Report
    "F",   # Pyflakes - Error Checker
    "E",   # Pycodestyle - Style Checker
    "D",   # Pydocstyle - Docstring Checker
    "UP",  # Pyupgrade - Update Old Syntax
    "N",   # pep8-naming - Naming Conventions
    "TRY", # Tryceratops - Try Except Checking
]

pydocstyle.convention = "google"

[tool.ruff.per-file-ignores]
"tests/*.py" = ["D", "S", "E501"]